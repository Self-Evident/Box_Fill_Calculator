<!DOCTYPE html>
<html lang="en-us">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>The Box Fill Calculator</title>

<template id=BFC_UPDATED>v2.00 2022-02-14 0220 ET</template>

<template id=BFC_LICENSE>
Copyright © 2019   https://github.com/Self-Evident

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
of the Software, and to permit persons to whom the Software is furnished to do
so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</template>




<style>
body { margin: 0; overflow-y: scroll; }

*, *:before, *:after { box-sizing: border-box; }

td h4.BFC { margin: .8rem 0 0 0; }

input.BFC, select.BFC {
	font-size: 1rem;
	font-family: arial;
	text-align: center;
	border-radius: 4px;
}

input[type=text].BFC  { width: 3rem; padding: 1px 0; font-weight: bold }

select.BFC        { padding: 3px 0rem 1px 0rem; width: 4.5rem; }
select.BFC option { font-size: 1em; }

select#BFC_theme_select { width: 10rem; }

button.BFC {
	border-radius: 4px;
	padding: 5px;
	margin: 0 0 0 0; 
	height: 1.8rem;
	font-size: 1rem;
}

button.BFC2 { width: 1.35rem; height: 1.25rem; line-height: .4rem; position: absolute; right: .5rem; top: .5rem; }

table.BFC        { border-collapse: collapse; display: inline-table; vertical-align: top; margin: 1rem 0 1rem 0; width: 100%; }
.BFC td, .BFC th { padding: .3rem; }
.BFC th          { padding: .4rem .3rem; font-size: 1.2rem; }

h2.BFC { display: inline-block; margin: 1rem 1rem 0 0; }
h4.BFC { display: inline-block; margin: 0 0 .5rem 0; }

#BFC_container   { display: none; } /** Temporary until page loads. **/
#BFC_container   { padding: 0 .5rem; margin: 0; }
#BFC_container * { font-family: arial; }
.BFC_conductor_container  { display: inline-block; margin: 0 1rem 1rem 0; vertical-align: top; max-width: 29rem; }
.BFC_results_and_reset    { display: inline-block; margin: 0 1rem 1rem 0;}

.BFC_conductors td { width: 20% } /* See comments & styles at end of sytle sheet. */
.BFC_conductors td.BFC_wiresize { text-align: center; }

#BFC_conductor_help { display: inline-block; border-top: dotted 1px #555; margin-top: .3rem; padding: .3rem 0; font-weight: normal; font-size: .9rem}

.BFC_additional    { width: 100%; }
.BFC_additional tr td:last-child { text-align: center; width: 6rem; }
.BFC_additional tr.BFC_devices_EGC_input_rows td { border-bottom: dotted 1px #777; }
.BFC_additional tr.BFC_largest_device_conductor_or_EGC_row  td { border-top: 0; }

.BFC_fill_info th { position: relative; }

#BFC_devices { margin: 0 0 0 0; }

#BFC_largest_device_conductor:disabled { opacity: .5; }
#BFC_largest_EGC:disabled              { opacity: .5; }

#BFC_results td:last-of-type { text-align: center; width: 5rem; }
#BFC_results td.BFC_result_item  { padding-left: 1rem; }
#BFC_results .BFC_allowances { width: 2.5rem; font-weight: normal; }
#BFC_results .BFC_plain     { background-color: transparent; border-color: transparent; color: inherit; }
.BFC_results_col_hdrs       { font-weight: bold; }

#BFC_results td.BFC_result_item_hidden { visibility: hidden; }

#BFC_show_math { width: 1.2rem; height: 1.2rem; line-height: .0rem; float: right; padding: 0 4px 0 3px; }

#BFC_results div.BFC_allowance_math  {
	float: right;
	margin: -.15rem .5rem -.3rem 2rem;
	border-top: 0;
	border-bottom: 0;
	border-left: 0;
	border-right: 0;
	display: inline-block;
	text-align: right;
}


#BFC_box_list_table     { min-width: 18rem; max-width: 22rem; }
#BFC_box_list_table td  { text-align: center; padding: .21rem 0; }
#BFC_box_list_table #BFC_box_list_h2     { font-weight: bold; }
#BFC_box_list_table td.BFC_boxlist_vol   { padding: .21rem .8rem; }
#BFC_box_list_table td.BFC_boxlist_type  { }
#BFC_box_list_table td.BFC_boxlist_trade { }

#BFC_show_boxes, #BFC_reset_inputs { margin-top: 1rem; }


.BFC_sub_header { font-weight: normal; font-size: 95%; }

div.BFC_frac { display: inline-block; margin: 0 0 0 .1rem; }
sup.BFC_frac, sub.BFC_frac { margin: 0; display: inline-block; font-size: 70%; }


noscript.BFC {
    position: fixed;
    top: 10px;
	border: solid 3px #633;
	background-color: rgb(255,255,255,.9);
	padding: 0; 
	margin: 0 1rem 0 0;
}

noscript.BFC h2 {  margin: .5rem .5rem; }

.BFC_disclaimer { display: inline-block; border: solid 1px #555; padding: 1rem; margin: .5rem 0; font-weight: normal; }

#BFC_license_onscreen {
	font-family: courier;
	font-size: 1.1rem;
	white-space: pre-wrap;
	border: solid 1px #555;
	display: inline-block;
	padding: 1rem;
}


#BFC_footer { display: inline-block; max-width: 55rem; }


/**************************************./
* Desired behavior of Conductors table: Depending on browswer width,
* either no input cell should wrap:
*       +----------------------------------------------------------------+
*       | #14 [    ] | #12 [    ] | #10 [    ] |  #8 [    ] |  #6 [    ] |
*       |------------+------------+------------+------------+------------|
*
* or all should:  +--------------------------------------------+
*                 |  #14   |  #12   |  #10   |   #8   |   #6   |
*                 | [    ] | [    ] | [    ] | [    ] | [    ] |
*                 |--------+--------+--------+--------+--------|
*
* Without the styles below this comment, depending on browser width and
* if .BFC_help_con_fill's are set to {display:none}, the cells of the conductors table 
* may not all wrap at once.
*       +----------------------------------------------------------------+
* eg:   | #14 [    ] | #12 [    ] | #10 [    ] |  #8 [    ] |     #6     |
*       |            |            |            |            |   [    ]   |
*       |------------+------------+------------+------------+------------|
*
* And, we just can't have that... :)
*
/***************************************/
.BFC_conductors tr td:last-child { width: 0rem; } /*Why??? I don't know - but it fixed it! And number of rem doesnt' seem to matter...*/
div.BFC_wrap_hack1 { display: inline-block; width: 2.0rem; }
/***************************************/
</style>





<!-- *******************************************************************************************************
	All themes must have the class BFC_theme.
	The default is contained within a <style>, but all other themes are in <templete>s.
	Themes (except the default) don't need to contain all theme-able styles, only those different than the default.
	Finally, <style THEME_CURRENT> must come after <style THEME_DEFAULT>.
*********************************************************************************************************-->





<style class=BFC_theme id=BFC_THEME_DEFAULT data-BFC_theme_desc="Default Theme">
body { background-color: rgb(160,180,200); }

.BFC:focus { outline: solid 3px #0FF; }

input.BFC, select.BFC { border: solid 1px #888; color: black; background-color: white; }

input[type=text].BFC:disabled { color: #333; background-color: rgba(255,255,255,.7) }

select.BFC_none  { background-color: rgba(255,255,255,.7) }

select.BFC_awg14 { background-color: #FFFee0 }
select.BFC_awg12 { background-color: #FFFF00 }
select.BFC_awg10 { background-color: orange }
select.BFC_awg8  { background-color: #444; color: white; }
select.BFC_awg6  { background-color: #222; color: white; }

option.BFC_awg14 { color: black; }
option.BFC_awg12 { color: black; }
option.BFC_awg10 { color: black; }
option.BFC_awg8  { color: white; }
option.BFC_awg6  { color: white; }

.BFC_awg14 { background-color: #FFFee0 }
.BFC_awg12 { background-color: #FFFF00 }
.BFC_awg10 { background-color: orange }
.BFC_awg8  { background-color: #444; color: white; }
.BFC_awg6  { background-color: #222; color: white; }

button.BFC {
	border: solid 1px gray; 
}

button.BFC:hover { background-color: #FFF; }
button.BFC:active { border: solid 2px #888; }  /* Must come after :hover. For mouse down events. */

.BFC.BFC_button_active { border: solid 2px #888; } /* For spacebar & enter keydown/up events. */

table.BFC        { border: solid 1px #555; }
.BFC td, .BFC th { border: solid 1px #555; }

.BFC_min_required_size { background-color: white; }
#BFC_Min_Box_Size { color: blue; }

input.BFC_non_zero { }

.BFC_suitable_standard_box { background-color: white; }
</style><!--//BFC_THEME_DEFAULT-->




<template class=BFC_theme id=BFC_THEME_DARK_GREEN data-BFC_theme_desc="Dark Green">
body { background-color: black; color: #0F0; }

.BFC:focus { outline: solid 2px #0F0; }

input.BFC, select.BFC { border: solid 1px #888; color: #0F0; background-color: black;}

input[type=text].BFC:disabled { color: #AAA; background-color: inherit; }
 
select.BFC_none  { color: #0D0; }

select.BFC_awg14 { color: #FFFee0; }
select.BFC_awg12 { color: #FFFF00; }
select.BFC_awg10 { color: orange;  }
select.BFC_awg8  { color: #EEE;    }
select.BFC_awg6  { color: #CCC;    }

option.BFC_awg14 { color: #FFFee0; }
option.BFC_awg12 { color: #FFFF00; }
option.BFC_awg10 { color: orange;  }
option.BFC_awg8  { color: #EEE;    }
option.BFC_awg6  { color: #CCC;    }

.BFC_awg14 { color: #FFFee0; background-color: inherit; }
.BFC_awg12 { color: #FFFF00; background-color: inherit; }
.BFC_awg10 { color: orange;  background-color: inherit; }
.BFC_awg8  { color: #EEE;    background-color: inherit; }
.BFC_awg6  { color: #CCC;    background-color: inherit; }

button.BFC {
	border: solid 1px #555;
	color: #0F0;
	background-color: #333;
	background: linear-gradient(to bottom, #555, #222, #222, #555);
}

button.BFC:hover { background: linear-gradient(to bottom, #AAA,#666, #333, #333, #666, #AAA); }
button.BFC:active { border: solid 2px #888; }  /* Must come after :hover. For mouse down events. */

.BFC.BFC_button_active { border: solid 2px #888; } /* For spacebar & enter keydown/up events. */

table.BFC        { border: solid 1px #555; }
.BFC td, .BFC th { border: solid 1px #555; }

.BFC_min_required_size { background-color: #272727; }
#BFC_Min_Box_Size { color: inherit;}

input.BFC_non_zero { background-color: #444; }

.BFC_suitable_standard_box { background-color: #272727; }
</template><!--//BFC_THEME_DARK_GREEN-->




<template class=BFC_theme id=BFC_THEME_DARK_Amber data-BFC_theme_desc="Dark Amber">
body { background-color: black; color: #FFbf00; }

.BFC:focus { outline: solid 2px #FFbf00; }

input.BFC, select.BFC { border: solid 1px #888; color: #FFbf00;; background-color: black;}

input[type=text].BFC:disabled { color: #AAA; background-color: inherit; }

select.BFC_none  { color: #DDae00; }

select.BFC_awg14 { color: #FFFee0; }
select.BFC_awg12 { color: #FFFF00; }
select.BFC_awg10 { color: orange;  }
select.BFC_awg8  { color: #EEE;    }
select.BFC_awg6  { color: #CCC;    }

option.BFC_awg14 { color: #FFFee0; }
option.BFC_awg12 { color: #FFFF00; }
option.BFC_awg10 { color: orange;  }
option.BFC_awg8  { color: #EEE;    }
option.BFC_awg6  { color: #CCC;    }

.BFC_awg14 { color: #FFFee0; background-color: inherit; }
.BFC_awg12 { color: #FFFF00; background-color: inherit; }
.BFC_awg10 { color: orange;  background-color: inherit; }
.BFC_awg8  { color: #EEE;    background-color: inherit; }
.BFC_awg6  { color: #CCC;    background-color: inherit; }

button.BFC {
	border: solid 1px #444;
	color: #FFbf00;
	background-color: #333;
	background: linear-gradient(to bottom, #666, #222, #222, #666); color: #FFbf00;
}

button.BFC:hover { background: linear-gradient(to bottom, #AAA,#666, #333, #333, #666, #AAA); color: #FFbf00; }
button.BFC:active { border: solid 2px #888; }  /* Must come after :hover. For mouse down events. */

.BFC.BFC_button_active { border: solid 2px #888; } /* For spacebar & enter keydown/up events. */

table.BFC        { border: solid 1px #555; } /*.//##### #996900 ##### .*/
.BFC td, .BFC th { border: solid 1px #555; }

.BFC_min_required_size { background-color: #272727; }
#BFC_Min_Box_Size { color: inherit;}

input.BFC_non_zero { background-color: #444; }

.BFC_suitable_standard_box { background-color: #272727; }
</template><!--//BFC_THEME_DARK_AMBER-->




<template class=BFC_theme id=BFC_THEME_DARK_YELLOW data-BFC_theme_desc="Dark Yellow">
body { background-color: black; color: #FF0; }

.BFC:focus { outline: solid 2px #FF0; }

input.BFC, select.BFC { border: solid 1px #888; color: #FF0;; background-color: black;}

input[type=text].BFC:disabled { color: #AAA; background-color: inherit; }

select.BFC_none  { color: #FF0; }

select.BFC_awg14 { color: #FFFee0; }
select.BFC_awg12 { color: #FFFF00; }
select.BFC_awg10 { color: orange;  }
select.BFC_awg8  { color: #EEE;    }
select.BFC_awg6  { color: #CCC;    }

option.BFC_awg14 { color: #FFFee0; }
option.BFC_awg12 { color: #FFFF00; }
option.BFC_awg10 { color: orange;  }
option.BFC_awg8  { color: #EEE;    }
option.BFC_awg6  { color: #CCC;    }

.BFC_awg14 { color: #FFFee0; background-color: inherit; }
.BFC_awg12 { color: #FFFF00; background-color: inherit; }
.BFC_awg10 { color: orange;  background-color: inherit; }
.BFC_awg8  { color: #EEE;    background-color: inherit; }
.BFC_awg6  { color: #CCC;    background-color: inherit; }

button.BFC {
	border: solid 1px #555;
	color: #FF0;
	background-color: #000;
	background: linear-gradient(to bottom, #666, #222, #222, #666); color: #FF0;
}


button.BFC:hover { background: linear-gradient(to bottom, #AAA,#666, #333, #333, #666, #AAA); color: #FF0; }
button.BFC:active { border: solid 2px #888; }  /* Must come after :hover. For mouse down events. */

.BFC.BFC_button_active { border: solid 2px #888; } /* For spacebar & enter keydown/up events. */

table.BFC        { border: solid 1px #555; }
.BFC td, .BFC th { border: solid 1px #555; }

.BFC_min_required_size { background-color: #272727; }
#BFC_Min_Box_Size { color: inherit;}

input.BFC_non_zero { background-color: #000; }

.BFC_suitable_standard_box { background-color: #272727; }
</template><!--//BFC_THEME_DARK_YELLOW-->




<template class=BFC_theme id=BFC_THEME_DARK_BLUE data-BFC_theme_desc="Dark Blue">
body { background-color: black; color: #00F; }

.BFC:focus { outline: solid 3px #00F; }

input.BFC, select.BFC { border: solid 1px #888; color: #00F;; background-color: black;}

input[type=text].BFC:disabled { color: #AAA; background-color: inherit; }

select.BFC_none  { color: #00F; }

select.BFC_awg14 { color: #FFFee0; }
select.BFC_awg12 { color: #FFFF00; }
select.BFC_awg10 { color: orange;  }
select.BFC_awg8  { color: #EEE;    }
select.BFC_awg6  { color: #CCC;    }

option.BFC_awg14 { color: #FFFee0; }
option.BFC_awg12 { color: #FFFF00; }
option.BFC_awg10 { color: orange;  }
option.BFC_awg8  { color: #EEE;    }
option.BFC_awg6  { color: #CCC;    }

.BFC_awg14 { color: #FFFee0; background-color: inherit; }
.BFC_awg12 { color: #FFFF00; background-color: inherit; }
.BFC_awg10 { color: orange;  background-color: inherit; }
.BFC_awg8  { color: #EEE;    background-color: inherit; }
.BFC_awg6  { color: #CCC;    background-color: inherit; }

button.BFC {
	border: solid 1px #55F;
	color: #00F;
	background-color: #000;
}


button.BFC:hover { background: linear-gradient(to bottom, #AAA,#666, #333, #333, #666, #AAA); color: #00F; }
button.BFC:active { border: solid 2px #888; }  /* Must come after :hover. For mouse down events. */

.BFC.BFC_button_active { border: solid 2px #888; } /* For spacebar & enter keydown/up events. */

table.BFC        { border: solid 1px #555; }
.BFC td, .BFC th { border: solid 1px #555; }

.BFC_min_required_size { background-color: #272727; }
#BFC_Min_Box_Size { color: inherit;}

input.BFC_non_zero { background-color: #000; }

.BFC_suitable_standard_box { background-color: #272727; }
</template><!--//BFC_THEME_DARK_BLUE-->




<template class=BFC_theme id=BFC_THEME_DARK_CYAN data-BFC_theme_desc="Dark Cyan">
body { background-color: black; color: #0FF; }

.BFC:focus { outline: solid 3px #0FF; }

input.BFC, select.BFC { border: solid 1px #888; color: #0FF;; background-color: black;}

input[type=text].BFC:disabled { color: #AAA; background-color: inherit; }

select.BFC_none  { color: #0FF; }

select.BFC_awg14 { color: #FFFee0; }
select.BFC_awg12 { color: #FFFF00; }
select.BFC_awg10 { color: orange;  }
select.BFC_awg8  { color: #EEE;    }
select.BFC_awg6  { color: #CCC;    }

option.BFC_awg14 { color: #FFFee0; }
option.BFC_awg12 { color: #FFFF00; }
option.BFC_awg10 { color: orange;  }
option.BFC_awg8  { color: #EEE;    }
option.BFC_awg6  { color: #CCC;    }

.BFC_awg14 { color: #FFFee0; background-color: inherit; }
.BFC_awg12 { color: #FFFF00; background-color: inherit; }
.BFC_awg10 { color: orange;  background-color: inherit; }
.BFC_awg8  { color: #EEE;    background-color: inherit; }
.BFC_awg6  { color: #CCC;    background-color: inherit; }

button.BFC {
	border: solid 1px #555;
	color: #0FF;
	background-color: #000;
	background: linear-gradient(to bottom, #666, #222, #222, #666); color: #0FF;
}


button.BFC:hover { background: linear-gradient(to bottom, #AAA,#666, #333, #333, #666, #AAA); color: #0FF; }
button.BFC:active { border: solid 2px #888; }  /* Must come after :hover. For mouse down events. */

.BFC.BFC_button_active { border: solid 2px #888; } /* For spacebar & enter keydown/up events. */

table.BFC        { border: solid 1px #555; }
.BFC td, .BFC th { border: solid 1px #555; }

.BFC_min_required_size { background-color: #272727; }
#BFC_Min_Box_Size { color: inherit;}

input.BFC_non_zero { background-color: #000; }

.BFC_suitable_standard_box { background-color: #272727; }
</template><!--//BFC_THEME_DARK_CYAN-->




<!--MUST come after <style id=BFC_THEME_DEFAULT>. -->
<style id=BFC_theme_current>/* Populated onload */</style>




<div id=BFC_container>

<noscript class=BFC>
	<h2>Javascript is not currently available.</h2>
	<h2>Javascript is used to perform the box fill calculations.</h2>
	<h2>Reload page if Javascript has been enabled.</h2>
</noscript>

<h2 class=BFC>The Box Fill Calculator</h2> <h4 class=BFC>Per NEC 314.16(B)</h4><br>
<h4 class=BFC>(Includes the 2020 box-fill rules for ground wires.)</h4>

<br>


<div class=BFC_conductor_container>

<table class="BFC BFC_fill_info">

	<tr><th colspan=5>
		Conductor Fill Information
		<button type=button class="BFC BFC2" id=BFC_show_help_con_fill>+</button>
		<div class=BFC_help_con_fill id=BFC_conductor_help>
			<b>Hot & neutral wires only.</b><br>
			For ground wires (EGC, etc.), see Additional Fill Information below.
		</div>
	</th></tr>

	<tr><td colspan=5>
			<h4 class=BFC>Number of Conductors Terminating in the Box</h4>
			<div class=BFC_help_con_fill>Enter number of conductors that originate outside the box and terminate in the box.</div>
	</td></tr>
	<tr>
		<td class="BFC_wiresize BFC_awg14"><div class=BFC_wrap_hack1>#14</div><input type=text class=BFC id=BFC_terms_awg14 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg12"><div class=BFC_wrap_hack1>#12</div><input type=text class=BFC id=BFC_terms_awg12 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg10"><div class=BFC_wrap_hack1>#10</div><input type=text class=BFC id=BFC_terms_awg10 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg8" ><div class=BFC_wrap_hack1>#8 </div><input type=text class=BFC id=BFC_terms_awg8  maxlength=2></td>
		<td class="BFC_wiresize BFC_awg6" ><div class=BFC_wrap_hack1>#6 </div><input type=text class=BFC id=BFC_terms_awg6  maxlength=2></td>
	</tr>

	<tr><td colspan=5>
			<h4 class=BFC>Number of Conductors Spliced in the Box</h4>
			<div class=BFC_help_con_fill>Enter number of conductors that originate outside the box and are spliced in the box.</div>
	</td></tr>
	<tr>
		<td class="BFC_wiresize BFC_awg14"><div class=BFC_wrap_hack1>#14</div><input type=text class=BFC id=BFC_splices_awg14 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg12"><div class=BFC_wrap_hack1>#12</div><input type=text class=BFC id=BFC_splices_awg12 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg10"><div class=BFC_wrap_hack1>#10</div><input type=text class=BFC id=BFC_splices_awg10 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg8" ><div class=BFC_wrap_hack1>#8 </div><input type=text class=BFC id=BFC_splices_awg8  maxlength=2></td>
		<td class="BFC_wiresize BFC_awg6" ><div class=BFC_wrap_hack1>#6 </div><input type=text class=BFC id=BFC_splices_awg6  maxlength=2></td>
	</tr>

	<tr><td colspan=5>
			<h4 class=BFC>Number of Conductors that Pass Thru the Box</h4>
			<div class=BFC_help_con_fill>Enter number of conductors that pass through the box without splice or termination.</div>
	</td></tr>
	<tr>
		<td class="BFC_wiresize BFC_awg14"><div class=BFC_wrap_hack1>#14</div><input type=text class=BFC id=BFC_pass_awg14 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg12"><div class=BFC_wrap_hack1>#12</div><input type=text class=BFC id=BFC_pass_awg12 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg10"><div class=BFC_wrap_hack1>#10</div><input type=text class=BFC id=BFC_pass_awg10 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg8" ><div class=BFC_wrap_hack1>#8 </div><input type=text class=BFC id=BFC_pass_awg8  maxlength=2></td>
		<td class="BFC_wiresize BFC_awg6" ><div class=BFC_wrap_hack1>#6 </div><input type=text class=BFC id=BFC_pass_awg6  maxlength=2></td>
	</tr>

	<tr><td colspan=5>
			<h4 class=BFC>Number of Loops or Coils with 12" of conductor.</h4>
			<div class=BFC_help_con_fill>Enter the number of loops or coils of unbroken conductors that are at least 12" in length. Each 12" loop or coil will be counted twice in the calculations.</div>
	</td></tr>
	<tr>
		<td class="BFC_wiresize BFC_awg14"><div class=BFC_wrap_hack1>#14</div><input type=text class=BFC id=BFC_loops_awg14 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg12"><div class=BFC_wrap_hack1>#12</div><input type=text class=BFC id=BFC_loops_awg12 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg10"><div class=BFC_wrap_hack1>#10</div><input type=text class=BFC id=BFC_loops_awg10 maxlength=2></td>
		<td class="BFC_wiresize BFC_awg8" ><div class=BFC_wrap_hack1>#8 </div><input type=text class=BFC id=BFC_loops_awg8  maxlength=2></td>
		<td class="BFC_wiresize BFC_awg6" ><div class=BFC_wrap_hack1>#6 </div><input type=text class=BFC id=BFC_loops_awg6  maxlength=2></td>
	</tr>
</table>





<br>
<table class="BFC BFC_additional BFC_fill_info">
	<tr>
		<th colspan="2">
			Additional Fill Information 
			<button class="BFC BFC2" id=BFC_show_help_add_fill type=button>+</button>
		</th>
	</tr>
	<tr>
		<td>
			Are there any <b>Internal Cable Clamps</b> in the box?<br>
			<div class=BFC_help_add_fill>A single volume allowance based on largest conductor in the box.</div>
		</td>
		<td class=BFC_additional_inputs>
			<select class=BFC id=BFC_internal_clamp>
				<option value=0 selected>No</option>
				<option value=1>Yes</option>
			</select>
		</td>
	</tr>

	<tr>
		<td>
			<b>Number of Support Fittings</b> types in the box.<br>
			<div class=BFC_help_add_fill>Luminaire studs or hickeys.<br>
			A single volume allowance for each type of fitting based on largest conductor in the box.</div>
		</td>
		<td>
			<input type=text class=BFC id=BFC_support_fittings maxlength=2>
		</td>
	</tr>

	<tr class=BFC_devices_EGC_input_rows>
		<td>
			<b>Number of Devices</b> (gangs) mounted to the box.
			<div class=BFC_help_add_fill>A double volume allowance is calculated for each gang required for mounting.</div>
		</td>
		<td><input type=text class=BFC id=BFC_devices maxlength=2></td>
	</tr>

	<tr class=BFC_largest_device_conductor_or_EGC_row>
		<td>
			<b>Largest Conductor</b> connected to a Device.
			<div class=BFC_help_add_fill>Size of the largest hot or neutral wire connected to a device in the box.  Ignore ground and bonding wires. </div>
		</td>
		<td>
			<select class=BFC id=BFC_largest_device_conductor>
				<option class=BFC_awg14 value="awg14" selected>#14</option>
				<option class=BFC_awg12 value="awg12">#12</option>
				<option class=BFC_awg10 value="awg10">#10</option>
				<option class=BFC_awg8  value="awg8" >#8</option>
				<option class=BFC_awg6  value="awg6" >#6</option>
			</select>
		</td>
	</tr>

	<tr class=BFC_devices_EGC_input_rows>
		<td>
			<b>Number of Grounds</b> entering the box.
			<div class=BFC_help_add_fill>
			Equipment Grounding Conductors (EGC) or equipment bonding jumpers.<br>
			A single volume allowance for the first 4, and 1/4 allowance for each additional.
			</div>
		</td>
		<td><input type=text class=BFC id=BFC_EGC_count maxlength=2></td>
	</tr>

	<tr class=BFC_largest_device_conductor_or_EGC_row>
		<td>
			<b>Largest Ground</b> that enters the box.
		</td>
		<td>
			<select class=BFC id=BFC_largest_EGC>
				<option class=BFC_awg14 value="awg14">#14</option>
				<option class=BFC_awg12 value="awg12">#12</option>
				<option class=BFC_awg10 value="awg10">#10</option>
				<option class=BFC_awg8  value="awg8" >#8</option>
				<option class=BFC_awg6  value="awg6" >#6</option>
			</select>
		</td>
	</tr>
</table><!--//BFC_additional-->


<button class=BFC id=BFC_reset_inputs type=reset>Reset/Clear All Inputs</button>
</div><!--//conductors & additional-->



<div class=BFC_results_and_reset>
<table class=BFC id=BFC_results>
	<tr><th colspan=2>Results</th></tr>
	<tr class=BFC_results_col_hdrs><td>Allowances for
		<button type=button class=BFC id=BFC_show_math>+</button></td>
		<td>in<sup>3</sup></td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_awg14>#14 Conductors
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_awg14 disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_awg14_ttl disabled>
			</div>
		</td>
		<td id=BFC_allowance_awg14>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_awg12>#12 Conductors
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_awg12 disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_awg12_ttl disabled>
			</div>
		</td>
		<td id=BFC_allowance_awg12>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_awg10>#10 Conductors
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_awg10 disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_awg10_ttl disabled>
			</div>
		</td>
		<td id=BFC_allowance_awg10>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_awg8>#8 Conductors
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_awg8 disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_awg8_ttl disabled>
			</div>
		</td>
		<td id=BFC_allowance_awg8>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_awg6>#6 Conductors
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_awg6 disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_awg6_ttl disabled>
			</div>
		</td>
		<td id=BFC_allowance_awg6>--</td>
	</tr>

	<tr><td class=BFC_result_item id=BFC_results_clamps>Cable Clamps
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_clamp disabled> x 
				<input type=text class="BFC BFC_allowances BFC_plain" id=BFC_clamps_cnt disabled value=1>
			</div>
		</td>
		<td id=BFC_allowance_Clamps>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_fittings>Support Fittings
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_fitting disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_fittings_cnt disabled>
			</div>
		</td>
		<td id=BFC_allowance_Fittings>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_devices>Devices
			<div class=BFC_allowance_math> 2 x
				<input type=text class="BFC BFC_allowances" id=BFC_per_device disabled> x 
				<input type=text class="BFC BFC_allowances" id=BFC_devices_cnt disabled>
			</div>
		</td>
		<td id=BFC_allowance_Devices>--</td>
	</tr>
	<tr><td class=BFC_result_item id=BFC_results_EGC>EGC
			<div class=BFC_allowance_math>
				<input type=text class="BFC BFC_allowances" id=BFC_per_egc disabled> x
				<input type=text class="BFC BFC_allowances" id=BFC_egc_cnt disabled> 
			</div>
		</td>
		<td id=BFC_allowance_Ground>--</td>
	</tr>



	<tr class=BFC_min_required_size><th>Total Allowances /<br>Minimum Required<br>Box Size</th><th id=BFC_Min_Box_Size>ERROR</th></tr>
</table>

<br>
List Standard Metal Boxes:
<select class=BFC id=BFC_show_boxes>
	<option value=none>None</option>
	<option value=some>Some</option>
	<option value=all>All</option>
</select>


<br><br><br><br><br><br><br>
Page Theme:
<select class=BFC id=BFC_theme_select><!--//Populated Onload--></select>

</div><!--//end BFC_results_and_reset -->


<table class=BFC id=BFC_box_list_table>
	<tr>
		<th colspan=3 id=BFC_box_list_header></th>
	</tr>
	<tr id=BFC_box_list_h2>
		<td class=BFC_boxlist_vol>in<sup>3</sup></td>
		<td class=BFC_boxlist_type>Type</td>
		<td class=BFC_boxlist_trade>Trade Size</td>
	</tr>
	<tbody id=BFC_box_list><!--//Populated onload--></tbody>
</table>

<br>
<div id=BFC_footer>
<h3 class="BFC_disclaimer">
	No guarantees are made as to the accuracy of calculations or compliance with
	local codes.&nbsp; Verify all calculations with a professional, licensed, electrician.
</h3>


<p class=BFC>Copyright © 2019  https://github.com/Self-Evident</p>
<p id=BFC_updated_displayed></p>
<button type=button class=BFC id=BFC_show_license>Show License</button><br>
<pre class=BFC_copyright_container id="BFC_license_onscreen"></pre>
</div>
</div><!--BFC_container-->





<script>(function(){
var D = document;
function E(id)  { return D.getElementById(id); }
function E_(id) { return D.getElementById(NS_ + id); }

var NS_ = "BFC_";   //A "Name Space" prefix for id's & classes.
					//The prefix is also used by itself as a class name (with or without the trailing underscore, "_"),
					//to select all specified tags for styling only (not used by JS).
					//  eg: <style>div.BFC { some styles }</style> <div class=BFC> <div class=BFC> ... etc...

var WIRE_SIZES = ['awg14', 'awg12', 'awg10', 'awg8', 'awg6'];

//Space allowance per conductor for given wire sizes, in cubic inches.
var ALLOWANCES = {"none": 0, 'awg14':2.00, 'awg12':2.25, 'awg10':2.50, 'awg8':3.00, 'awg6':5.00}

//Used in Save_to_localStorage(). Thought it was also going to be used in Load_from_localStorage(), but no. //##### At least not yet...
var CONDUCTOR_TYPES  = ['terms', 'splices', 'pass', 'loops'];
var ADDITIONAL_TYPES = [
	'internal_clamp',
	'support_fittings',
	'devices',
	'largest_device_conductor',
	'EGC_count',
	'largest_EGC',
];

var INIT = true; //Used during Init().

var $CONTAINER = E_('container');

var $TERMS = {}, $SPLICES = {}, $PASS = {}, $LOOPS = {}, $ALLOWS = {};
for (var size of WIRE_SIZES) {
	$TERMS[size]   = E_('terms_'     + size);
	$SPLICES[size] = E_('splices_'   + size);
	$PASS[size]    = E_('pass_'      + size);
	$LOOPS[size]   = E_('loops_'     + size);
	$ALLOWS[size]  = E_('allowance_' + size);
}
var CONDUCTOR_RULES = [$TERMS, $SPLICES, $PASS, $LOOPS]; //But NOT $ALLOWS! $ALLOWS are result fields, not inputs.


var $INTERNAL_CLAMP    = E_('internal_clamp');
var $SUPPORT_FITTINGS  = E_('support_fittings');
var $DEVICES           = E_('devices');
var $LARGEST_DEVICE_CONDUCTOR = E_('largest_device_conductor');
var $EGC_COUNT         = E_('EGC_count');
var $LARGEST_EGC       = E_('largest_EGC');

var $SHOW_MATH = E_('show_math');

var $RESULTS_CLAMPS   = E_('results_clamps');
var $RESULTS_FITTINGS = E_('results_fittings');
var $RESULTS_DEVICES  = E_('results_devices');
var $RESULTS_EGC      = E_('results_EGC');

var $ALLOWANCE_CLAMPS   = E_('allowance_Clamps');
var $ALLOWANCE_FITTINGS = E_('allowance_Fittings');
var $ALLOWANCE_DEVICES  = E_('allowance_Devices');
var $ALLOWANCE_GROUND   = E_('allowance_Ground');
var $MIN_BOX_SIZE       = E_('Min_Box_Size');

var $PER_CLAMP    = E_('per_clamp');
var $PER_FITTING  = E_('per_fitting');
var $FITTINGS_CNT = E_('fittings_cnt');
var $PER_DEVICE   = E_('per_device');
var $DEVICES_CNT  = E_('devices_cnt');
var $PER_EGC      = E_('per_egc');
var $EGC_CNT      = E_('egc_cnt');

var $BOX_LIST_TABLE  = E_('box_list_table');
var $BOX_LIST_HEADER = E_('box_list_header');
var $BOX_LIST        = E_('box_list');

var $SHOW_HELP_CON_FILL = E_('show_help_con_fill');
var $SHOW_HELP_ADD_FILL = E_('show_help_add_fill');

var $RESET_INPUTS = E_('reset_inputs');
var $SHOW_BOXES   = E_('show_boxes');
var $THEME_SELECT = E_('theme_select');
var $THEME_CURRENT = E_('theme_current');

var $UPDATED           = E_('UPDATED');
var $UPDATED_DISPLAYED = E_('updated_displayed');
var $LICENSE           = E_('LICENSE');
var $SHOW_LICENSE      = E_('show_license');
var $LICENSE_ONSCREEN  = E_('license_onscreen');




//	Standard Metal Boxes															Maximum Number of Conductors* (arranged by AWG size)
//																					* Where no volume allowances are required
//	          Box Trade Size                                      Minimum Volume      by 314.16(B)(2) through (B)(5).
//	["mm",              "in.",                 "description",      "cm^3","in^3",   18, 16, 14, 12, 10,  8, 6],
var STANDARD_BOXES = [
  //[       [0],                  [1],                       [2],     [3],   [4],  [5],[6],[7],[8],[9],[10],[11]],
	["100 x 32",        "(4 x 1 1/4)",         "round/octagonal",     205,  12.5,    8,  7,  6,  5,  5,   5,  2 ],
	["100 x 38",        "(4 x 1 1/2)",         "round/octagonal",     254,  15.5,   10,  8,  7,  6,  6,   5,  3 ],
	["100 x 54",        "(4 x 2 1/8)",         "round/octagonal",     353,  21.5,   14, 12, 10,  9,  8,   7,  4 ],
	["100 x 32",        "(4 x 1 1/4)",         "square",              295,  18.0,   12, 10,  9,  8,  7,   6,  3 ],
	["100 x 38",        "(4 x 1 1/2)",         "square",              344,  21.0,   14, 12, 10,  9,  8,   7,  4 ],
	["100 x 54",        "(4 x 2 1/8)",         "square",              497,  30.3,   20, 17, 15, 13, 12,  10,  6 ],
	["120 x 32",        "(4 11/16 x 1 1/4)",   "square",              418,  25.5,   17, 14, 12, 11, 10,   8,  5 ],
	["120 x 38",        "(4 11/16 x 1 1/2)",   "square",              484,  29.5,   19, 16, 14, 13, 11,   9,  5 ],
	["120 x 54",        "(4 11/16 x 2 1/8)",   "square",              689,  42.0,   28, 24, 21, 18, 16,  14,  8 ],
	[ "75 x 50 x 38",   "(3 x 2 x 1 1/2)",     "device",              123,   7.5,    5,  4,  3,  3,  3,   2,  1 ],
	[ "75 x 50 x 50",   "(3 x 2 x 2)",         "device",              164,  10.0,    6,  5,  5,  4,  4,   3,  2 ],
	[ "75 x 50 x 57",   "(3 x 2 x 2 1/4)",     "device",              172,  10.5,    7,  6,  5,  4,  4,   3,  2 ],
	[ "75 x 50 x 65",   "(3 x 2 x 2 1/2)",     "device",              205,  12.5,    8,  7,  6,  5,  5,   4,  2 ],
	[ "75 x 50 x 70",   "(3 x 2 x 2 3/4)",     "device",              230,  14.0,    9,  8,  7,  6,  5,   4,  2 ],
	[ "75 x 50 x 90",   "(3 x 2 x 3 1/2)",     "device",              295,  18.0,   12, 10,  9,  8,  7,   6,  3 ],
	["100 x 54 x 38",   "(4 x 2 1/8 x 1 1/2)", "device",              169,  10.3,    6,  5,  5,  4,  4,   3,  2 ],
	["100 x 54 x 48",   "(4 x 2 1/8 x 1 7/8)", "device",              213,  13.0,    8,  7,  6,  5,  5,   4,  2 ],
	["100 x 54 x 54",   "(4 x 2 1/8 x 2 1/8)", "device",              238,  14.5,    9,  8,  7,  6,  5,   4,  2 ],
	[ "95 x 50 x 65",   "(3 3/4 x 2 x 2 1/2)", "masonry box/gang",    230,  14.0,    9,  8,  7,  6,  5,   4,  2 ],
	[ "95 x 50 x 90",   "(3 3/4 x 2 x 3 1/2)", "masonry box/gang",    344,  21.0,   14, 12, 10,  9,  8,   7,  4 ],
	["min. 44.5 depth", "FS - (1 3/4) ",       "single cover/gang",   221,  13.5,    9,  7,  6,  6,  5,   4,  2 ],
	["min. 60.3 depth", "FD - (2 3/8) ",       "single cover/gang",   295,  18.0,   12, 10,  9,  8,  7,   6,  3 ],
	["min. 44.5 depth", "FS - (1 3/4) ",       "multiple cover/gang", 295,  18.0,   12, 10,  9,  8,  7,   6,  3 ],
	["min. 60.3 depth", "FD - (2 3/8) ",       "multiple cover/gang", 395,  24.0,   16, 13, 12, 10,  9,   8,  4 ],
];
//A few indexes for STANDARD_BOXES[] 
var BOX = {};
	BOX.TRADE = 1; //trade size
	BOX.TYPE  = 2; //description
	BOX.SIZE  = 4; //volume




function Format_Fraction(string, lead, numer, denom) {
	var search_for = lead + numer + "/" + denom;
	var replace_with  = "<div class=" + NS_ + "frac>";
	    replace_with += "<sup class=" + NS_ + "frac>" + numer + "</sup>&frasl;";
	    replace_with += "<sub class=" + NS_ + "frac>" + denom + "</sub></div>";
	return string.replace( new RegExp( search_for, 'g' ), replace_with )
}//end Format_Fraction()




function Sort_Format_STANDARD_BOXES() {
	//Sort boxes by volume (either cm^3 [3],  or in^3 [4]).
	STANDARD_BOXES.sort(function(a,b) { return a[BOX.SIZE] - b[BOX.SIZE] }); //Remember, array indexes count from 0...

	for (var box of STANDARD_BOXES) {
		box[BOX.TRADE] = box[BOX.TRADE].replace("(","");
		box[BOX.TRADE] = box[BOX.TRADE].replace(")","");
	
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ",  "1",  "8" );
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ",  "3",  "8" );
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ",  "7",  "8" );
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ",  "1",  "4" );
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ",  "3",  "4" );
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ",  "1",  "2" );
		box[BOX.TRADE] = Format_Fraction( box[BOX.TRADE], " ", "11", "16" );
	}
}//end Sort_Format_STANDARD_BOXES()




function Normalize_Event(event) {
	//Normalize the event & which/keycode/charcode...
	if (!event) {var event = window.event;} //for IE
	event.key_code = event.which || event.keyCode || event.charCode;
	return event;
}//end Normalize_Event()




function Scroll_Blur(event){
	//Permit using esc to remove focus, and some keyboard navigation while in <input>'s.

	Normalize_Event(event);
	var key = event.key_code;
	
	var ESC = 27, AU = 38, AD = 40, PU = 33, PD = 34;

	//remove focus from input/select to allow keyboard arrows/pageup/pagedown/etc page scrolling.
	if (key == ESC) { D.activeElement.blur(); return; }

	if (event.target.tagName == "INPUT") {
		//Arrow down scrolls the page up, towards the bottom of the page, and vice-versa.
		if      (key == AU) { window.scrollBy(0, -38); }
		else if (key == AD) { window.scrollBy(0,  38); }
		else if (key == PU) { window.scrollBy(0,-400); }
		else if (key == PD) { window.scrollBy(0, 400); }
	}
}//end Scroll_Blur()




function Parse_Int(value) {
	var value = parseInt(value);
	if (isNaN(value)) { value = 0; }
	return value;
}//end Parse_Int()




function Normalize_Input($text_input) {
	//Mostly to blank inputs that are 0
	var value = parseFloat($text_input.value);
	if (value > 0) { $text_input.value = value; }
	else           { $text_input.value = ""; value = 0; }
	return value;
}//end Normalize_Input();




function Space_or_Enter_on_Button(e) {
	//Capture space & enter keys to toggle button style, to simulate mouse-click on <button>s.
	//That is, similar to the effect of ":active" styles of the mouse click events.

	if (e.target.tagName != "BUTTON") { return }

	Normalize_Event(e);

	if (e.type == "keydown") {
		if (e.key_code == 32 || e.key_code == 13) { e.target.classList.add(NS_ + 'button_active'); }
	}

	if (e.type == "keyup") {
		if (e.key_code == 32 || e.key_code == 13) { e.target.classList.remove(NS_ + 'button_active'); }
	}
}//end Space_or_Enter_on_Button()




function Highlight_Input($rule) {
	//Highlight any non-zero conductor terms/splices/passthrus/loops.
	if (Parse_Int($rule.value) > 0) {
		$rule.classList.add(NS_ + 'non_zero');
	}
	else { $rule.classList.remove(NS_ + 'non_zero'); }
}//end Highlight_Input()




function Set_Style_per_awg($what, new_size, allowance) {
	//Pass 1 for allowance if setting style irregardless, regardless of whether or not you think it's a word...

	//Remove any existing size styles...
	for (var old_size in ALLOWANCES) { $what.classList.remove(NS_ + old_size); }

	$what.classList.remove(NS_ + "result_item_hidden");

	if (Parse_Int(allowance) == 0) {
		if ($what.tagName == "SELECT" || $what.tagName == "INPUT") { new_size = "none"; }
		$what.classList.add(NS_ + "result_item_hidden");
	}

	//Add style for new size.
	$what.classList.add(NS_ + new_size);
}//end Set_Style_per_awg()




function Largest_Conductor_in_Box() {
	//Return largest conductor size present in box: awg6, awg8, awg10, awg12, or awg14.
	var largest_wire = "none";

	//Go thru WIRE_SIZES[] in reverse, from largest to smallest wire size.
	//Remember, in awg, smaller numbers are bigger wires (awg6 > awg8).
	GET_MAX_SIZE: for (var s = WIRE_SIZES.length-1; s >= 0; s--) {
		var largest_conductor = "";
		for (var rule of CONDUCTOR_RULES) {
			if (Parse_Int(rule[WIRE_SIZES[s]].value) > 0) {
				largest_wire = WIRE_SIZES[s];
				break GET_MAX_SIZE;
			}
		}
	}

	return largest_wire;
}//end Largest_Conductor_in_Box()




function Output_Result($output, allowance, size, $result_desc) {
	//allowance is a number, the result. size will be "awg6", or "awg14", etc...
	if (allowance < 1) { $output.innerHTML = ''; }
	else { $output.innerHTML = allowance; }

	if ($result_desc) { Set_Style_per_awg($result_desc, size, allowance); }
}//end Output_Result()




function Show_Hide_Class(class_name, $show_btn, show_text, hide_text) {
	//class_name without any NS_ prefix.
	//FF worked by just using "helps" as the object of a for/of loop, as in: for (var $section of helps) {...}.
	//But Edge, not so much.  I don't know why.  But, what else is new. In anycase, it works in Edge now.
	var helps = D.getElementsByClassName(NS_ + class_name);
	var help_sections = Object.values(helps);

	if (INIT) {
		$show_btn.value = localStorage.getItem($show_btn.id);
		//"pre-toggle" now, since we want to preserve saved state (from localStorage).
		if ($show_btn.value === '') { $show_btn.value = "none"; } else  { $show_btn.value = ""; }
	}

	if ($show_btn.value === "") { $show_btn.value = "none"; $show_btn.innerHTML = show_text; }
	else                        { $show_btn.value = ""    ; $show_btn.innerHTML = hide_text; }

	if (!INIT) { localStorage.setItem($show_btn.id, $show_btn.value); }
	
	if ($show_btn.value == "none") { localStorage.removeItem($show_btn.id); }
	
	for (var $section of help_sections) { $section.style.display = $show_btn.value; }
}//end Show_Hide_Class()




function List_Standard_Boxes(min_size) { 

	//Change wording in header based on what's shown.
	if ($SHOW_BOXES.value == "some") {
		$BOX_LIST_HEADER.innerHTML = "Some Suitable Standard Metal Boxes";
		$BOX_LIST_TABLE.style.display = "";
	}
	else if ($SHOW_BOXES.value == "all") {
		$BOX_LIST_HEADER.innerHTML = "Standard Metal Boxes";
		$BOX_LIST_TABLE.style.display = "";
	}
	else { 
		$BOX_LIST_HEADER.innerHTML = "--";
		$BOX_LIST_TABLE.style.display = "none";
		return;
	}

	$BOX_LIST.innerHTML = "";

	var show_all = $SHOW_BOXES.value == "all";

	//Show headers, but don't show any boxes if min == 0.
	if ((min_size == 0) && !show_all) { return; }

	var rows = "";
	var count = 0;

	for (var box of STANDARD_BOXES) {
		if (!show_all && ((box[BOX.SIZE] < min_size) || (count > 10))) { continue }
		count++;

		if ((min_size > 0) && (box[BOX.SIZE] >= min_size)) { var classes = " class=" + NS_ + "suitable_standard_box"; }
		else                                               { var classes = ""; }
		
		rows += "<tr" + classes + ">";
		rows += "<td>" + box[BOX.SIZE] + "</td>";
		rows += "<td>" + box[BOX.TYPE] + "</td>";
		rows += "<td>" + box[BOX.TRADE] + "</td>";
		rows += "</tr>\n";
	}

	$BOX_LIST.innerHTML = rows;

}//end List_Standard_Boxes()




function Init_Input_States() {

	//Non-zero input values....
	for (var size of WIRE_SIZES){ for (var rule of CONDUCTOR_RULES) { Highlight_Input(rule[size]); } }

	if (Parse_Int($DEVICES.value) < 1) { $LARGEST_DEVICE_CONDUCTOR.disabled = true; }
	else                               { $LARGEST_DEVICE_CONDUCTOR.disabled = false; }

	if (Parse_Int($EGC_COUNT.value) < 1) { $LARGEST_EGC.disabled = true; }
	else                                 { $LARGEST_EGC.disabled = false; }

	Set_Style_per_awg($LARGEST_DEVICE_CONDUCTOR, $LARGEST_DEVICE_CONDUCTOR.value, 1);
	Set_Style_per_awg($LARGEST_EGC,              $LARGEST_EGC.value, 1);
}//end Init_Input_States()




function Calc_Conductor_Allowances() {
	var conductor_allowances_total = 0;

	//12" $LOOPS are counted twice...
	var conductor_rules = CONDUCTOR_RULES.slice(); //Clone rules.
	conductor_rules.push($LOOPS);                  //Add 2nd copy of $LOOPS so counted a second time.

	for (var size of WIRE_SIZES) {
		var allowance_count = 0;
		for (var rule of conductor_rules) {
			var $rule = rule[size];
			allowance_count += Normalize_Input($rule);
		}

		E_(size + '_ttl').value = allowance_count; //for $SHOW_MATH
		Normalize_Input(E_(size + '_ttl'));

		var allowance_for_size = (allowance_count * ALLOWANCES[size]);
		Output_Result($ALLOWS[size], allowance_for_size, size, E_('results_' + size));
		conductor_allowances_total += allowance_for_size;
	}

	return conductor_allowances_total;
}//end Calc_Conductor_Allowances()




function Show_Math_and_Output_Results(size, allowance, $per, allow_per, $allowance_output, $results, $cnt, $what) {
	//Update $SHOW_MATH values, Output_Result().
	if ($per) {                  
		$per.value = allow_per;
		Normalize_Input($per)
		if (allow_per > 0) { $per.value = Normalize_Input($per).toFixed(2); }
	}
	if ($cnt) {
		$cnt.value = $what.value;
		if ($cnt == $EGC_CNT) {
			var egc_count = Normalize_Input($EGC_COUNT);
			if (egc_count > 4) { $cnt.value = $cnt.value + " /4"; }
			else
			if (egc_count > 0) { $cnt.value = 1;  }
			else               { $cnt.value = ""; }
		}
	}

	Output_Result($allowance_output, allowance, size, $results);
}//end Show_Math_and_Output_Results()




function Calculate_Min_Box_Size() {

	var largest_conductor_in_box    = Largest_Conductor_in_Box();
	var allowance_largest_conductor = ALLOWANCES[largest_conductor_in_box];

	//Conductors
	var total_allowances =  Calc_Conductor_Allowances();

	//Internal cable clamps
	var size = largest_conductor_in_box;
	var allowance = ($INTERNAL_CLAMP.value * allowance_largest_conductor);
	total_allowances += allowance;
	Show_Math_and_Output_Results(size, allowance, $PER_CLAMP, allowance, $ALLOWANCE_CLAMPS, $RESULTS_CLAMPS);

	//Support Fittings
	var size = largest_conductor_in_box;
	var allowance = Normalize_Input($SUPPORT_FITTINGS) * allowance_largest_conductor;
	total_allowances += allowance;
	Show_Math_and_Output_Results(size, allowance, $PER_FITTING, ALLOWANCES[size], $ALLOWANCE_FITTINGS, $RESULTS_FITTINGS, $FITTINGS_CNT, $SUPPORT_FITTINGS);

	//Devices mounted to box:      "a double volume allowance ..."
	var size = $LARGEST_DEVICE_CONDUCTOR.value;
	var allowance = ALLOWANCES[size] * Normalize_Input($DEVICES) * 2;
	total_allowances += allowance;
	Show_Math_and_Output_Results(size, allowance, $PER_DEVICE, ALLOWANCES[size], $ALLOWANCE_DEVICES, $RESULTS_DEVICES, $DEVICES_CNT, $DEVICES);

	//EGC
	var size = $LARGEST_EGC.value;
	var allowance = 0;
	var egc_count = Normalize_Input($EGC_COUNT);
	if (egc_count > 4) { allowance += ALLOWANCES[size] * (egc_count / 4); }	else
	if (egc_count > 0) { allowance += ALLOWANCES[size] }
	total_allowances += allowance;	
	Show_Math_and_Output_Results(size, allowance, $PER_EGC, ALLOWANCES[size], $ALLOWANCE_GROUND, $RESULTS_EGC, $EGC_CNT, $EGC_COUNT);

	Set_Style_per_awg($INTERNAL_CLAMP,   largest_conductor_in_box,        $INTERNAL_CLAMP.value);
	Set_Style_per_awg($SUPPORT_FITTINGS, largest_conductor_in_box,        $SUPPORT_FITTINGS.value);
	Set_Style_per_awg($DEVICES,          $LARGEST_DEVICE_CONDUCTOR.value, $DEVICES.value);
	Set_Style_per_awg($EGC_COUNT,        $LARGEST_EGC.value,              $EGC_COUNT.value);

	List_Standard_Boxes(total_allowances);

	$MIN_BOX_SIZE.innerHTML = total_allowances;

	//In case Normalize_Input() normalized any <input>s.
	if (!INIT) { Save_to_localStorage(); }

}//end Calculate_Min_Box_Size()




function Populate_Theme_Select() {
	var themes = D.getElementsByClassName(NS_ + "theme");
	var nsl = NS_.length;
	var theme_options = "";
	for (var t = 0; t < themes.length; t++) {
		var name = themes[t].id.substr(nsl);	
		var desc = themes[t].getAttribute('data-' + NS_ +'theme_desc');
		theme_options += "<option value=" + name + ">" + desc + "</option>\n";
	}

	$THEME_SELECT.innerHTML = theme_options;
}//end Populate_Theme_Select()




function Parse_Json(string) {
	//Currently, only used to parse returned saved settings from localStorage.
	//If the parse fails, return null, as localStorage does if a localStorage item doesn't exit.
	//ie: return null on any non object/failure/error.
	try {
		var parsed = JSON.parse(string);
		// Non-exception exceptions:
		// JSON.parse(false) and JSON.parse(1234) simply return false & 1234.
		// We'd prefer null, but JSON.parse(null) returns null, and typeof null === "object".
		// So check for those. And since null is falsey, this works:
		if (parsed && typeof parsed === "object") { return parsed; }
	}
	catch (e) {}
	return null;
}//end Parse_Json()




function Save_to_localStorage() {
	var setting  = '';
	var settings = {};
	
	for (var type of CONDUCTOR_TYPES) {
		for (var size of WIRE_SIZES) {
			var base_id = type + "_" + size;
			settings[base_id] = E_(base_id).value;
		}
	}
	
	for (var type of ADDITIONAL_TYPES) { settings[type] = E_(type).value; }

	localStorage.setItem(NS_ + "SETTINGS", JSON.stringify(settings));
}//end Save_to_localStorage()




function Load_from_localStorage() {
	var settings = {};
	var saved_settings = Parse_Json(localStorage.getItem(NS_ + 'SETTINGS'));

	if (saved_settings == null) { return; }

	for (var key in saved_settings) {
		if (E_(key)) { //skips invalid keys
			E_(key).value = saved_settings[key];
			settings[key] = saved_settings[key];
		}
	}

	localStorage.setItem(NS_ + "SETTINGS", JSON.stringify(settings));
}//end Load_from_localStorage()




function Assign_Events() {

	D.addEventListener("keydown", function(e) { Space_or_Enter_on_Button(e); Scroll_Blur(e); });
	D.addEventListener("keyup",   function(e) { Space_or_Enter_on_Button(e); });


	//Note: Save_to_localStorage() is the last line of Calculate_Min_Box_Size(),
	//      so it is not needed in event handlers that call Calculate_Min_Box_Size().

	for (var size of WIRE_SIZES) {
		$TERMS  [size].oninput = function(){ Calculate_Min_Box_Size(); Highlight_Input(this); }
		$SPLICES[size].oninput = function(){ Calculate_Min_Box_Size(); Highlight_Input(this); }
		$PASS   [size].oninput = function(){ Calculate_Min_Box_Size(); Highlight_Input(this); }
		$LOOPS  [size].oninput = function(){ Calculate_Min_Box_Size(); Highlight_Input(this); }
	}


	$INTERNAL_CLAMP.onchange = function(){ Calculate_Min_Box_Size(); }

	$SUPPORT_FITTINGS.oninput = function(){ Calculate_Min_Box_Size(); }


	$DEVICES.oninput = function(){
		Calculate_Min_Box_Size();
		Set_Style_per_awg(this, $LARGEST_DEVICE_CONDUCTOR.value, this.value);
		if (Parse_Int(this.value) < 1) { $LARGEST_DEVICE_CONDUCTOR.disabled = true; }
		else                           { $LARGEST_DEVICE_CONDUCTOR.disabled = false; }
	}

	$EGC_COUNT.oninput = function(){
		Calculate_Min_Box_Size();
		Set_Style_per_awg(this, $LARGEST_EGC.value, this.value);
		if (Parse_Int(this.value) < 1) { $LARGEST_EGC.disabled = true; }
		else                           { $LARGEST_EGC.disabled = false; }
	}

	$LARGEST_DEVICE_CONDUCTOR.onchange = function(){ Calculate_Min_Box_Size(); Set_Style_per_awg(this, this.value, 1); }
	$LARGEST_EGC             .onchange = function(){ Calculate_Min_Box_Size(); Set_Style_per_awg(this, this.value, 1); }


	$RESET_INPUTS.onclick   = function() {
		for (var rule of CONDUCTOR_RULES) { for (var size in rule) { rule[size].value = ""; } }
		$INTERNAL_CLAMP.selectedIndex = 0;
		$SUPPORT_FITTINGS.value = "";
		$DEVICES.value = "";
		$LARGEST_DEVICE_CONDUCTOR.selectedIndex = 0;
		$EGC_COUNT.value = "";
		$LARGEST_EGC.selectedIndex = 0;

		Init_Input_States();
		Calculate_Min_Box_Size();

		$BOX_LIST_HEADER.innerHTML = "--";
		$BOX_LIST_TABLE.style.display = "none";
		$SHOW_BOXES.selectedIndex = 0;
		localStorage.removeItem($SHOW_BOXES.id)

		$SHOW_HELP_CON_FILL.value = '';
		Show_Hide_Class('help_con_fill', $SHOW_HELP_CON_FILL, "+", "-");

		$SHOW_HELP_ADD_FILL.value = '';
		Show_Hide_Class('help_add_fill', $SHOW_HELP_ADD_FILL, "+", "-");

		$SHOW_MATH.value = '';
		Show_Hide_Class('allowance_math', $SHOW_MATH, "+", "-");

		$SHOW_LICENSE.value = '';
		Show_Hide_Class('copyright_container', $SHOW_LICENSE, 'Show License', 'Hide License')

		localStorage.removeItem(NS_ + "SETTINGS");
	}


	$SHOW_HELP_CON_FILL.onclick = function() { Show_Hide_Class('help_con_fill',       this, "+", "-"); } //ⓘ (i)
	$SHOW_HELP_ADD_FILL.onclick = function() { Show_Hide_Class('help_add_fill',       this, "+", "-"); }
	$SHOW_MATH.onclick          = function() { Show_Hide_Class('allowance_math',      this, "+", "-"); }
	$SHOW_LICENSE.onclick       = function() { Show_Hide_Class('copyright_container', this, "Show License", "Hide License"); 
											   $LICENSE_ONSCREEN.scrollIntoView();
	}


	$SHOW_BOXES.onchange = function() {
		List_Standard_Boxes(E_('Min_Box_Size').innerHTML * 1);
		if (this.value == "none") { localStorage.removeItem(this.id); }
		else                      { localStorage.setItem(this.id, this.value); }
	}


	$THEME_SELECT.addEventListener('change', function(){
		$THEME_CURRENT.innerHTML = E_($THEME_SELECT.value).innerHTML;
		
		if (this.selectedIndex == 0) { localStorage.removeItem(this.id); }
		else                         { localStorage.setItem(this.id, this.value); }
	});

}//end Assign_Events()




function Init() { //***********************************************************/

	INIT = true;

	Assign_Events();

	Sort_Format_STANDARD_BOXES();

	Populate_Theme_Select();

	Load_from_localStorage();

	Calculate_Min_Box_Size();

	Init_Input_States();

	Show_Hide_Class('help_con_fill',       $SHOW_HELP_CON_FILL, '+', '-')
	Show_Hide_Class('help_add_fill',       $SHOW_HELP_ADD_FILL, '+', '-')
	Show_Hide_Class('allowance_math',      $SHOW_MATH,          '+', '-')
	Show_Hide_Class('copyright_container', $SHOW_LICENSE, 'Show License', 'Hide License')

	//Populate per conductor allowances for results math.
	for (var size of WIRE_SIZES) { E_("per_" + size).value = ALLOWANCES[size].toFixed(2) + " HEHE"; }

	$SHOW_BOXES.value = localStorage.getItem($SHOW_BOXES.id);
	if ($SHOW_BOXES.value !== "all" && $SHOW_BOXES.value !== "some") { 
		$SHOW_BOXES.value = "none";
		localStorage.removeItem($SHOW_BOXES.id);
	}

	$THEME_SELECT.value = localStorage.getItem($THEME_SELECT.id);
	if (E_($THEME_SELECT.value)) {
		$THEME_CURRENT.innerHTML = E_($THEME_SELECT.value).innerHTML;
	} else {
		$THEME_SELECT.selectedIndex = 0;
		localStorage.removeItem($THEME_SELECT.id);
	}

	$LICENSE_ONSCREEN.innerHTML = $LICENSE.innerHTML.trim();

	$UPDATED_DISPLAYED.innerHTML = "Updated " + $UPDATED.innerHTML;

	$CONTAINER.style.display = "block";

	INIT = false;
}//end Init() //***************************************************************/




window.addEventListener("load", function() { Init() } );
})();</script>
